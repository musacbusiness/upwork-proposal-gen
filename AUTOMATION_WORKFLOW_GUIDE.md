# LinkedIn Post Automation Workflow - Complete Guide

## Overview

This is a fully automated 3-stage post management system that maintains a constant supply of LinkedIn content and intelligently schedules posts across optimized time windows.

---

## The 3-Stage Workflow

### Stage 1: DRAFT (Content Creation)
**Status: `Draft`**
- Posts are auto-generated with title and content only
- No images attached
- No scheduled times set
- Ready for your review and editing

**What happens:**
1. Automation monitors inventory (target: 21 posts = 7 days worth)
2. When count falls below 21, new posts are generated
3. Posts appear in Airtable with `Status: Draft`

**Your action:**
- Review posts in Airtable
- Edit if needed
- When ready, change status to `Pending Review`

---

### Stage 2: PENDING REVIEW (Image Generation)
**Status: `Pending Review`**
- Triggered: When you change status from Draft → Pending Review
- Automation generates image based on visual type specified
- Image is added to the post in Airtable

**What happens:**
1. Make.com webhook detects status change
2. Calls image generation API (future: DALL-E, Midjourney, etc.)
3. Image added to "Image" field
4. Post ready for scheduling

**Your action:**
- Review generated image
- Edit if needed
- When ready, change status to `Approved - Ready to Schedule`

---

### Stage 3: APPROVED - READY TO SCHEDULE (Intelligent Scheduling)
**Status: `Approved - Ready to Schedule`**
- Posts enter a smart scheduling queue
- Automation assigns to next available time slot
- Status changes to `Pending Review` with scheduled time

**What happens:**
1. Post enters scheduling queue (FIFO - First In First Out)
2. Scheduler checks available time slots:
   - **Slot 1:** 8 AM - 10 AM
   - **Slot 2:** 12 PM - 2 PM
   - **Slot 3:** 5 PM - 7 PM
3. If multiple posts queued simultaneously:
   - Post 1 → Next available slot
   - Post 2 → Next available slot after that
   - Post 3 → Next available slot after that
   - Spreads intelligently across days
4. Random time within slot assigned (e.g., 8:47 AM)

**Example Scenario:**
```
TIMESTAMP: 2026-01-05 11:30 AM
I approve 3 posts simultaneously

Current slots occupied:
- Jan 5: Slot 1 (filled), Slot 2 (filled), Slot 3 (open)
- Jan 6: Slot 1 (filled), Slot 2 (open), Slot 3 (open)
- Jan 7: All open

ASSIGNMENT:
Post 1 → Jan 5, Slot 3 (5-7 PM) ← scheduled at 5:42 PM
Post 2 → Jan 6, Slot 2 (12-2 PM) ← scheduled at 1:15 PM
Post 3 → Jan 6, Slot 3 (5-7 PM) ← scheduled at 6:03 PM

All posted within 2 days, filling gaps intelligently
```

---

### Stage 4: PENDING REVIEW → POSTED (Publishing)
**Status: `Posted`**
- Make.com webhook detects `Pending Review` status with scheduled time
- At scheduled time, posts to LinkedIn
- Status automatically changes to `Posted`
- "Posted At" timestamp recorded

**Your action:**
- Monitor LinkedIn for post performance
- Approve/deny in Airtable (feeds topic learning system)

---

### Stage 5: POSTED → AUTO-DELETE (Cleanup)
**Auto-Delete after 7 days**
- Automation monitors "Posted At" timestamps
- When post has been live for 7+ days, deletes from Airtable
- Keeps your Airtable table clean
- Space freed for new posts

**Example Timeline:**
```
Jan 5, 5:42 PM - Posted (status: Posted)
Jan 6-11 - Live on LinkedIn, collecting engagement
Jan 12, 8:00 AM - Auto-deleted from Airtable
```

---

## Inventory Management

### Auto-Generation

The system maintains **21 posts in Draft status** at all times (= 7 days worth at 3 posts/day).

**How it works:**
1. Automation runs every 5 minutes
2. Counts Draft posts
3. If count < 21:
   - Generates enough posts to reach 21
   - Each randomly picks topic from 73 topics
   - Each uses different writing framework/hook
4. Repeats continuously

### Topic Learning

As you approve/deny posts:
- High-performing topics get more weight in generation
- Topics with 100% rejection rate (3+ denials) auto-deprecate
- Never appear in suggestions again
- System naturally learns your audience preferences

---

## Status Flowchart

```
┌─────────────────────────────────────────────────────────────────┐
│ DRAFT (You create/edit)                                         │
│ • Generated by automation                                       │
│ • No image, no scheduled time                                   │
│ • Ready for your review                                         │
└──────────────────────┬──────────────────────────────────────────┘
                       │ You click: "Change status → Pending Review"
                       ▼
┌─────────────────────────────────────────────────────────────────┐
│ PENDING REVIEW (Automation generates image)                    │
│ • Make.com detects status change                                │
│ • Image generated & added to post                               │
│ • Still waiting for approval to schedule                        │
└──────────────────────┬──────────────────────────────────────────┘
                       │ You click: "Change status → Approved - Ready to Schedule"
                       ▼
┌─────────────────────────────────────────────────────────────────┐
│ APPROVED - READY TO SCHEDULE (In queue)                        │
│ • Status change triggers automation                             │
│ • Enters intelligent scheduling queue                           │
│ • Assigns to next available time slot                           │
└──────────────────────┬──────────────────────────────────────────┘
                       │ Automation assigns slot & time
                       ▼
┌─────────────────────────────────────────────────────────────────┐
│ PENDING REVIEW (Scheduled with time)                           │
│ • Now has Scheduled Time field filled                           │
│ • Waiting for Make.com to post                                  │
└──────────────────────┬──────────────────────────────────────────┘
                       │ Make.com posts at scheduled time
                       ▼
┌─────────────────────────────────────────────────────────────────┐
│ POSTED (Live on LinkedIn)                                      │
│ • Posted to LinkedIn                                            │
│ • "Posted At" timestamp recorded                                │
│ • Collecting engagement on platform                             │
└──────────────────────┬──────────────────────────────────────────┘
                       │ 7 days elapse
                       ▼
┌─────────────────────────────────────────────────────────────────┐
│ ✓ AUTO-DELETED FROM AIRTABLE                                   │
│ • Post aged 7+ days                                             │
│ • Removed from inventory                                        │
│ • Space freed for new content                                   │
└─────────────────────────────────────────────────────────────────┘
```

---

## Scripts & How They Work

### 1. `draft_post_generator.py`
**Purpose:** Maintains inventory of 21 Draft posts

**What it does:**
- Counts current Draft posts
- If < 21, generates new posts
- Each post: random topic, random framework, random hook
- Stores as Draft (no images, no scheduling)

**Runs:** Every 5 minutes (via orchestrator)

**Manual usage:**
```bash
python3 execution/draft_post_generator.py
```

---

### 2. `smart_scheduler.py`
**Purpose:** Intelligent time slot assignment

**What it does:**
- Finds posts with status `Approved - Ready to Schedule`
- For each post (in order):
  - Finds next available slot (8-10am, 12-2pm, 5-7pm)
  - Assigns random time within slot
  - Updates Airtable status to `Pending Review` with scheduled time
- Spreads posts intelligently across days

**Time Slot Logic:**
- Checks all occupied slots
- Searches forward up to 60 days
- Fills slots in order: Slot 1 → Slot 2 → Slot 3 → Next Day

**Runs:** Every 5 minutes (via orchestrator)

**Manual usage:**
```bash
python3 execution/smart_scheduler.py
```

---

### 3. `post_cleanup.py`
**Purpose:** Auto-delete old posts

**What it does:**
- Finds posts with status `Posted`
- Checks "Posted At" timestamp
- If posted 7+ days ago: DELETE
- Removes from Airtable

**Runs:** Every 5 minutes (via orchestrator)

**Manual usage:**
```bash
python3 execution/post_cleanup.py
```

---

### 4. `automation_orchestrator.py`
**Purpose:** Master controller

**What it does:**
1. Runs cleanup
2. Maintains inventory
3. Processes scheduling queue

**Runs:** Can run in two modes:
- `--mode once` - Single execution
- `--mode continuous` - Every 5 minutes (default)

**Manual usage:**
```bash
# Run once
python3 execution/automation_orchestrator.py --mode once

# Run continuously (every 5 minutes)
python3 execution/automation_orchestrator.py --mode continuous

# Custom interval (every 2 minutes)
python3 execution/automation_orchestrator.py --mode continuous --interval 120
```

---

## Airtable Status Values

Use these exact status values to trigger automation:

| Status | Meaning | Next Step |
|--------|---------|-----------|
| `Draft` | Generated, awaiting review | Review & edit, then set to Pending Review |
| `Pending Review` | Image being generated or ready to schedule | Review image, then set to Approved - Ready to Schedule |
| `Approved - Ready to Schedule` | Waiting to enter scheduler queue | Automation assigns time slot |
| `Posted` | Live on LinkedIn | Monitor engagement, auto-deletes after 7 days |

---

## Running the Automation

### Option 1: Continuous Mode (Recommended)

Start continuous automation in background:
```bash
nohup python3 execution/automation_orchestrator.py --mode continuous &
```

This runs forever, checking every 5 minutes.

### Option 2: Scheduled via Cron

Add to crontab (runs every 5 minutes):
```bash
*/5 * * * * cd /Users/musacomma/Agentic\ Workflow && python3 execution/automation_orchestrator.py --mode once
```

### Option 3: Modal Cloud

Deploy to Modal for serverless execution (recommended for reliability).

---

## Monitoring & Troubleshooting

### Check Inventory
```bash
python3 execution/draft_post_generator.py
```
Should show: `✅ Inventory satisfied: 21 Draft posts`

### Check Scheduling Queue
```bash
python3 execution/smart_scheduler.py
```
Should show: `✅ No posts in scheduling queue` (if nothing waiting)

### Manual Cleanup Test
```bash
python3 execution/post_cleanup.py
```
Shows which posts would be deleted

### Full Automation Cycle
```bash
python3 execution/automation_orchestrator.py --mode once
```
Runs all three tasks in sequence

---

## Workflow Summary

1. **Every 5 minutes:** Automation ensures 21 Draft posts exist
2. **You review:** Edit posts as needed
3. **You trigger scheduling:** Change status to `Approved - Ready to Schedule`
4. **Automation schedules:** Assigns to next available time slot
5. **Make.com posts:** At scheduled time, post goes live
6. **7 days later:** Auto-deleted from Airtable

**Result:** Consistent content flow, intelligent posting schedule, zero manual posting work.

---

## Key Features

✅ **Automatic inventory management** - Always 21 posts ready
✅ **Smart scheduling** - Fills time slots intelligently
✅ **Queue system** - Handles burst approvals gracefully
✅ **Auto-cleanup** - Deletes old posts automatically
✅ **Topic learning** - Learns from your approval patterns
✅ **3 posts/day** - Optimal frequency for LinkedIn
✅ **Spread across time** - Covers all peak hours (8am, 12pm, 5pm)
✅ **Zero manual posting** - Fully automated via Make.com
